<!DOCTYPE html>
<html>
<body class="lift:content_id=main">
<div id="main" class="lift:surround?with=default;at=content">
    <div data-lift="NewAssessment">
        <script language="JavaScript">
            var go = false;
            var tempoBpm = 60;
            function metro() {
                if (go) {
                    $('#metronome').removeClass('active');
                    go = false;
                } else {
                    $('#metronome').addClass('active');
                    go = true;
                    beep();
                }
            }
            function beep() {
                if (go) {
                    var startTime = new Date().getTime();
                    document.getElementById('beepOne').play();
                    var elapsed = new Date().getTime() - startTime;
                    var bps = tempoBpm == 0 ? 1 : tempoBpm / 60.0;
                    var msDelay = 1000 / bps;
                    setTimeout("beep()", msDelay - elapsed);
                }
            }
        </script>
        <span id="setTempo"/>
    </div>
    <div data-lift="StudentDetails">
        <div id="student">
            <div>
                <h2><span class="lastName"></span>, <span class="firstName"></span></h2>
                <table class="autoWidth noShade">
                    <tr>
                        <td class="alignRight">Grade:</td>
                        <td><span class="grade"/></td>
                    </tr>
                    <tr>
                        <td class="alignRight">Student ID:</td>
                        <td><span class="stuId"/></td>
                    </tr>
                    <tr>
                        <td class="alignRight">Last piece passed:</td>
                        <td><span id="lastPiece"/></td>
                    </tr>
                </table>
                <p/>

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Group Assignments</h3>
                    </div>
                    <div class="panel-body">

                        <table class="autoWidth noShade">
                          <tr>
                            <th>Sel</th> <th>Year</th> <th>Group</th> <th>Instrument</th>
                          </tr>
                          <tr class="assignmentRow">
                            <td class="sel"></td>
                            <td class="year"></td>
                            <td class="group"></td>
                            <td class="instrument"></td>
                          </tr>
                        </table>
                        <br/>

                        <div data-lift="StudentDetails.groupAssignments">
                            <div><span id="delete" class="btn" style="display: none;"></span>
                            <span id="create" class="btn"></span> <span id="nextSel"></span></div>
                        </div>
                    </div>
                </div>

                <h3>Assessments</h3>
                <p class="assessmentsSummary"/>

                <div data-lift="NewAssessment">
                    <h4>New Assessment</h4>
                    <form data-lift="form.ajax">
                        <div>
                            <span id="instrument"></span> <span id="subinstrument"></span> <span id="piece"></span>
                        </div>
                        <p/>
                        <div><span id="passButton" class="btn btn-success btn-lg"></span>
                            <span style="margin-left: 2em;"></span>
                            <span id="failButton" class="btn btn-danger btn-lg"></span>
                            <span style="margin-left: 2em;"></span>
                            <input id="metronome" class="btn btn-lg" type="button" value="Metronome"
                                   onclick="metro()"/>
                            Tempo: <span id="tempo"></span>
                        </div>

                        <p/>
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h5 class="panel-title">Comments</h5>
                            </div>
                            <div class="panel-body">
                                <div class="row">
                                    <div id="commentCheckboxesDiv" class="col-md-2">
                                        <ul id="checkboxes" class="simpleUl">
                                            <li id="checkbox"></li>
                                        </ul>
                                    </div>
                                    <div id="commentTextDiv" class="col-md-10">
                                        <span id="commentText"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <h4>Past Assessments</h4>
                <div data-lift="Assessments?eager_eval=true">
                    <lift:embed what="_assessments"/>
                </div>
            </div>
        </div>
    </div>
    <audio id="beepOne" src="assets/audio/woodblock.wav" preload="auto">Please use a standards-compliant browser.</audio>
</div>
</body>
</html>
